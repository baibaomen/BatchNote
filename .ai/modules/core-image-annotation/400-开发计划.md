# 开发计划：core-image-annotation

## 任务分解

### Phase 1：预览窗口

- [ ] 1.1 创建 PreviewForm 预览窗口
- [ ] 1.2 实现原图显示（原尺寸，可滚动）
- [ ] 1.3 实现悬浮触发（鼠标移入缩略图显示）
- [ ] 1.4 实现悬浮关闭（鼠标移出关闭）

### Phase 2：画笔绘制

- [ ] 2.1 创建 DrawingCanvas 绘制画布控件
- [ ] 2.2 实现鼠标事件捕捉（MouseDown/Move/Up）
- [ ] 2.3 实现实时绘制路径
- [ ] 2.4 实现平滑线条（可选优化）

### Phase 3：撤销功能

- [ ] 3.1 实现笔画历史栈
- [ ] 3.2 实现撤销操作（Ctrl+Z / 按钮）
- [ ] 3.3 实现清除所有标注

### Phase 4：标注持久化

- [ ] 4.1 将标注合并到图片（生成 AnnotatedImage）
- [ ] 4.2 保存时机处理（关闭预览时自动保存）

## 任务依赖

- Phase 2 依赖 Phase 1 完成
- Phase 3 依赖 Phase 2 完成
- Phase 4 依赖 Phase 2-3 完成

## 预估工时

| 任务 | 预估 | 实际 |
|------|------|------|
| Phase 1 | 3h | - |
| Phase 2 | 2h | - |
| Phase 3 | 1.5h | - |
| Phase 4 | 1.5h | - |
| **合计** | **8h** | - |
