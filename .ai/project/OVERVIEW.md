# 项目概述

## 愿景

**BatchNote** — 批量截图批注工具，专门优化与大模型的互动反馈体验。

### 核心痛点

AI 对话的反馈效率低下 — 当用户阅读 AI 的长篇输出时，往往有多处想法需要反馈，但当前的对话模式强制「线性沟通」：
- 需要逐一截图，然后在一个输入框里用文字描述
- 思维被打断，上下文被割裂
- 表达不精确（"左边那个"、"下面的代码"）

### 解决方案

提供一个「可视化批注 + 批量整合」的工作流：
1. **即时捕捉** — 看到问题立刻截图+批注，不打断阅读流
2. **精准标注** — 在图上直接画出关注点
3. **批量提交** — 收集完所有反馈后，一次性发送给 AI

---

## 目标用户

- 经常与 AI 进行长对话的用户
- 需要对 AI 输出进行多点反馈的场景

---

## 核心功能（MVP）

| 功能 | 说明 |
|------|------|
| 热键呼出 TopMost 窗口 | 全局热键，不切换窗口即可操作 |
| Ctrl+V 粘贴截图 | 自动添加到列表末尾 |
| 新增纯文本条目 | 不含图片的纯文本条目 |
| 缩略图 + 文本框布局 | 从上到下排列 |
| 条目勾选 | 只合成勾选的条目 |
| 缩略图悬浮显示原图 | 鼠标移入显示 |
| 原图画笔标注 | 绘制 + 撤销 |
| 条目自动编号 | 便于引用 |
| 拖拽排序、删除 | 灵活管理 |
| 合成大图 | 保持原编号 |
| 复制到剪贴板 | 一键复制 |
| 状态实时持久化 | 自动保存/还原 |
| 历史记录 | 保留最近 N 次合成结果 |

---

## 技术架构

### 技术栈

| 项目 | 选择 |
|------|------|
| 平台 | Windows 10/11 |
| 框架 | WinForms |
| .NET 版本 | .NET Framework 4.8 |
| 测试框架 | xUnit + NSubstitute |

### 模块划分

| 模块 | 职责 |
|------|------|
| core-main-window | 主窗口 UI、截图列表管理 |
| core-image-annotation | 画笔绘制、步骤撤销 |
| core-image-composite | 布局算法、合成输出 |
| core-hotkey | 全局热键注册 |
| core-history | 历史保存、加载、管理 |

---

## 项目结构

```
BatchNote/
├── .ai/                    # AI 协作管理
├── .collab/                # 多智能体协作目录
├── src/BatchNote/          # 主项目源码
├── tests/                  # 测试项目
└── BatchNote.sln           # 解决方案
```
