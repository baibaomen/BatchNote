## [2025-12-17 18:13:53] 百宝门 → @all [项目启动]

🚀 **BatchNote MVP 开发启动**

---

### 项目目标

**BatchNote** — 批量截图批注工具，专门优化与大模型的互动反馈体验。

**核心痛点**：AI对话的反馈效率低下 — 当用户阅读AI的长篇输出时，往往有多处想法需要反馈，但当前的对话模式强制「线性沟通」。

**解决方案**：「可视化批注 + 批量整合」工作流 —
1. 即时捕捉 — 看到问题立刻截图+批注，不打断阅读流
2. 精准标注 — 在图上直接画出关注点
3. 批量提交 — 收集完所有反馈后，一次性发送给AI

---

### MVP 功能清单（v1.0）

| 功能 | 说明 |
|------|------|
| 热键呼出TopMost窗口 | 全局热键（Ctrl+Shift+B），不切换窗口即可操作 |
| Ctrl+V粘贴截图 | 自动添加到列表末尾 |
| 新增纯文本条目 | 不含图片的纯文本条目 |
| 左缩略图 + 右文本框布局 | 从上到下排列 |
| 条目勾选 | 选择性发送，未勾选的留待下次 |
| 缩略图悬浮显示原图 | 鼠标移入显示 |
| 原图画笔标注 | 绘制 + 步骤撤销 |
| 条目自动编号 | 图片和纯文本统一编号 |
| 粘贴后自动聚焦文本框 | 提升连贯输入体验 |
| 拖拽排序、删除 | 灵活管理 |
| 合成大图 | 只合成勾选的条目，保持原编号 |
| 复制到剪贴板 | 一键复制 |
| 状态实时持久化 | 自动保存/还原 |
| 历史记录 | 保留最近N次合成结果 |

---

### 技术栈

- .NET Framework 4.8 + WinForms
- Windows 10/11
- 测试框架：xUnit + NSubstitute

---

### 开发基础分支

`feature/batchnote-mvp-base`

**基础分支已包含完整的模块设计文档：**

每个模块目录 `.ai/modules/<module-name>/` 包含：
- `100-概述.md` — 模块是什么、边界、依赖
- `200-开发设计.md` — UI设计、接口设计、数据结构、设计决策
- `300-验证设计.md` — 模块目标、验收标准（AC）
- `400-开发计划.md` — 开发任务分解、预估工时
- `500-验证计划.md` — 验证任务分解
- `600-状态.md` — 各阶段状态汇总、当前待办

- 请从此分支创建自己的任务分支
- 命名格式：`feature/{模块名}-{你的名字}`
- 例如：`feature/core-main-window-xiaoming`

---

### 模块划分

| 模块 | 职责 |
|------|------|
| core-main-window | 主窗口UI、截图列表管理、拖拽排序、删除 |
| core-image-annotation | 画笔绘制、步骤撤销 |
| core-image-composite | 布局算法、编号绘制、合成输出 |
| core-hotkey | 全局热键注册、窗口显示/隐藏 |
| core-history | 历史保存、加载、管理 |

具体分工由管理者协调安排。

---

### 验收标准

根据用户想达成的功能目标，测试可用即可。

核心理念：「目标对齐」+「可验收」，不拘泥于单元测试、覆盖率等形式化指标。

---

### 管理者

**@丰豆**（由 BOSS 指派）

---

### 项目文档规范

⚠️ **重要**：本项目严格遵循 `.ai/AI-INSTRUCTIONS.md` 中的协作规则：

1. **每轮必须更新 CHAT-LOG.md**
2. **开始工作前必须确认当前状态**（读取 STATUS.md）
3. **完成任务后同步更新文档**
4. **代码变更必须可验收**
5. **偏离计划需要先沟通**

模块文档结构：
```
.ai/modules/<module-name>/
├── 100-概述.md           # 模块是什么、边界、依赖
├── 200-开发设计.md       # 架构、接口、数据结构
├── 300-验证设计.md       # 目标→验收标准→验证约束
├── 400-开发计划.md       # 开发任务拆解
├── 500-验证计划.md       # 验证任务拆解
└── 600-状态.md           # 各阶段状态汇总、当前任务
```

---

### 注意事项

- 协作消息在 `.collab/` 目录（worktree，collab 分支）
- 代码开发在各自 feature 分支（从基础分支创建）
- 消息文件只追加，不覆盖
- 有问题及时沟通，不要死等

---

**各位签到后开始工作！**

---

## [2025-12-17 18:27:34] 百宝门 → @all [基础分支更新]

📦 **基础分支文档已完善**

`feature/batchnote-mvp-base` 分支已推送以下内容：

**5个模块的完整设计文档：**
- core-main-window（主窗口）
- core-image-annotation（图片标注）
- core-image-composite（图片合成）
- core-hotkey（全局热键）
- core-history（历史记录）

**每个模块包含：**
- 200-开发设计.md — UI设计、接口、数据结构
- 300-验证设计.md — 验收标准（AC）
- 400-开发计划.md — 任务分解
- 500-验证计划.md — 验证任务
- 600-状态.md — 当前状态和待办

**建议开发顺序：**
1. core-main-window Phase 1 + core-hotkey（可并行）
2. core-main-window Phase 2-3
3. core-image-annotation
4. core-image-composite
5. core-history
6. core-main-window Phase 4-5
7. 集成测试

等待管理者（丰豆）和执行者签到！

